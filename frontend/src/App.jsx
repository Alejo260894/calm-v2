import React, {useState, useEffect} from 'react';import Login from './components/Login';import Dashboard from './components/Dashboard';import Products from './components/Products';import PurchaseOrders from './components/PurchaseOrders';import CreatePO from './components/CreatePO';import Movements from './components/Movements';import { setToken, clearToken } from './api';

export default function App(){ const [view,setView]=useState('dashboard'); const [auth,setAuth]=useState(!!localStorage.getItem('token'));
useEffect(()=>{ if(localStorage.getItem('token')) setToken(localStorage.getItem('token')) },[]);
function onLogin(token){ setToken(token); setAuth(true); setView('dashboard'); }
function onLogout(){ clearToken(); setAuth(false); setView('login'); }
return (<div className='min-h-screen'><header className='bg-white shadow'><div className='max-w-7xl mx-auto py-6 px-4 flex justify-between items-center'><h1 className='text-2xl font-bold'>Mini ERP PRO</h1><nav className='space-x-2'><button className='btn' onClick={()=>setView('dashboard')}>Dashboard</button><button className='btn' onClick={()=>setView('products')}>Products</button><button className='btn' onClick={()=>setView('po_list')}>POs</button><button className='btn' onClick={()=>setView('po_create')}>Create PO</button><button className='btn' onClick={()=>setView('movements')}>Movements</button><button className='btn' onClick={onLogout}>Logout</button></nav></div></header><main className='max-w-7xl mx-auto py-6 px-4'>{!auth && <Login onLogin={onLogin} />}{auth && view==='dashboard' && <Dashboard />}{auth && view==='products' && <Products />}{auth && view==='po_list' && <PurchaseOrders />}{auth && view==='po_create' && <CreatePO />}{auth && view==='movements' && <Movements />}</main></div>) }
